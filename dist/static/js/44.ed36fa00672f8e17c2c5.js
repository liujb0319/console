webpackJsonp([44],{"+lHm":function(e,t,a){var s=a("wBu8");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a("XkoO")("7927d138",s,!0)},"6NfO":function(e,t,a){var s=a("f68a");s(s.S+s.F*!a("PRM/"),"Object",{defineProperty:a("Lohu").f})},Kgio:function(e,t,a){"use strict";function s(e){a("+lHm")}Object.defineProperty(t,"__esModule",{value:!0});var o=a("ZS32"),i=a("gsAq"),n=a("J0+h"),l=s,r=n(o.a,i.a,l,"data-v-de09c35c",null);t.default=r.exports},ZS32:function(e,t,a){"use strict";var s,o=a("a3Yh"),i=a.n(o);t.a=(s={props:{},created:function(){},ready:function(){},data:function(){return{option:[{value:"DaemonSet",label:"Daemon Set"},{value:"Endpoints",label:"Endpoints"},{value:"HorizontalPodAutoscaler",label:"Horizontal Pod Autoscaler"},{value:"Job",label:"Job"},{value:"NetworkPolicy",label:"Network Policy"},{value:"Policy",label:"Policy"},{value:"PolicyBinding",label:"Policy Binding"},{value:"Role",label:"Role"},{value:"RoleBinding",label:"Role Binding"},{value:"RoleBindingRestriction",label:"Role Binding Restriction"},{value:"ServiceAccount",label:"Service Account"},{value:"Template",label:"Template"}],value:"",tableKey:1,listLoading:!1,tableData:[],namespace:"",resource:"",group:"",urls:""}},components:{},filters:{}},i()(s,"created",function(){this.namespace=this.$route.params.disName;var e=this.getUrlKey("kind");this.value=e,e&&(this.getGroup(e),this.getTableData(this.resource,this.urls))}),i()(s,"methods",{getUrlKey:function(e){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(location.href)||[,""])[1].replace(/\+/g,"%20"))||null},getGroup:function(e){switch(e){case"DaemonSet":this.resource="daemonsets",this.group="extensions",this.urls="apis/extensions/v1beta1";break;case"Endpoints":this.resource="endpoints",this.group="",this.urls="api/v1";break;case"HorizontalPodAutoscaler":this.resource="horizontalpodautoscalers",this.group="autoscaling",this.urls="apis/autoscaling/v1";break;case"Job":this.resource="jobs",this.group="batch",this.urls="apis/batch/v1";break;case"NetworkPolicy":this.resource="networkpolicies",this.group="extensions",this.urls="apis/extensions/v1beta1";break;case"Policy":this.resource="policies",this.group="authorization.openshift.io",this.urls="apis/authorization.openshift.io/v1";break;case"PolicyBinding":this.resource="policybindings",this.group="authorization.openshift.io",this.urls="apis/authorization.openshift.io/v1";break;case"Role":this.resource="roles",this.group="authorization.openshift.io",this.urls="apis/authorization.openshift.io/v1";break;case"RoleBinding":this.resource="rolebindings",this.group="authorization.openshift.io",this.urls="apis/authorization.openshift.io/v1";break;case"RoleBindingRestriction":this.resource="rolebindingrestrictions",this.group="authorization.openshift.io",this.urls="apis/authorization.openshift.io/v1";break;case"ServiceAccount":this.resource="serviceaccounts",this.group="",this.urls="api/v1";break;case"Template":this.resource="templates",this.group="template.openshift.io",this.urls="apis/template.openshift.io/v1"}},handleCommand:function(){this.getGroup(this.value);var e={kind:this.value,group:this.group},t="#/products/"+this.namespace+"/resources/source-manage/?kind="+this.value+"&group="+this.group;history.pushState(e,null,t),this.getTableData(this.resource,this.urls)},getTableData:function(e,t){var a=this;this.$ajax({method:"get",url:"https://openshift-cluster.example.com:8443/"+t+"/namespaces/"+this.namespace+"/"+e}).then(function(e){console.log("资源管理列表",e),e=JSON.parse(e.request.response),a.tableData=e.items}).catch(function(e){console.log("获取资源管理相应列表资源失败",e)})},deleList:function(e){var t=this;e.indexOf(":")>=0&&alert("输入有分号！"),e=e.replace(":","%3A"),console.log(e),this.$ajax({method:"delete",url:"https://openshift-cluster.example.com:8443/"+this.urls+"/namespaces/"+this.namespace+"/"+this.resource+"/"+e}).then(function(e){console.log("删除列表元素",e),t.getTableData(t.resource,t.urls)}).catch(function(e){console.log("删除列表元素失败",e)})},openDele:function(e){var t=this;this.$confirm("此操作将删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.deleList(e),t.$notify({title:"成功",message:"删除成功！",type:"success"})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})}}),i()(s,"computed",{}),i()(s,"watch",{}),s)},a3Yh:function(e,t,a){"use strict";t.__esModule=!0;var s=a("liLe"),o=function(e){return e&&e.__esModule?e:{default:e}}(s);t.default=function(e,t,a){return t in e?(0,o.default)(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},gsAq:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-select",{attrs:{placeholder:"请在列表中选择一个资源"},on:{change:e.handleCommand},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.option,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,staticClass:"mt20 container-table",attrs:{data:e.tableData,"element-loading-text":"给我一点时间",stripe:""}},[a("el-table-column",{attrs:{label:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.metadata.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("fromNow")(t.row.metadata.creationTimestamp)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"标签",width:"550"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.metadata.labels?e._e():a("span",[e._v("无标签")]),e._v(" "),t.row.metadata.labels?a("div",[t.row.metadata.labels.app?a("span",[e._v("app:"+e._s(t.row.metadata.labels.app))]):e._e(),e._v("  \n          "),t.row.metadata.labels.application?a("span",[e._v("application:"+e._s(t.row.metadata.labels.application))]):e._e(),e._v("  \n          "),t.row.metadata.labels.template?a("span",[e._v("template:"+e._s(t.row.metadata.labels.template))]):e._e(),e._v("  \n          "),t.row.metadata.labels.xpaas?a("span",[e._v("xpaas:"+e._s(t.row.metadata.labels.xpaas))]):e._e()]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"left",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[":default"!=t.row.metadata.name?a("div",[a("span",{staticClass:"blue-color"},[e._v("编辑YAML")]),e._v(" "),a("span",[e._v("|")]),e._v(" "),a("span",{staticClass:"blue-color",on:{click:function(a){e.openDele(t.row.metadata.name)}}},[e._v("删除")])]):e._e()]}}])})],1)],1)},o=[],i={render:s,staticRenderFns:o};t.a=i},liLe:function(e,t,a){e.exports={default:a("uwuJ"),__esModule:!0}},uwuJ:function(e,t,a){a("6NfO");var s=a("0nnt").Object;e.exports=function(e,t,a){return s.defineProperty(e,t,a)}},wBu8:function(e,t,a){t=e.exports=a("YfG4")(!1),t.push([e.i,".el-select[data-v-de09c35c]{width:350px}",""])}});