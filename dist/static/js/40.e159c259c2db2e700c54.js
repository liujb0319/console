webpackJsonp([40],{"3cXf":function(e,t,a){e.exports={default:a("I4CF"),__esModule:!0}},"6NfO":function(e,t,a){var o=a("f68a");o(o.S+o.F*!a("PRM/"),"Object",{defineProperty:a("Lohu").f})},"94Ue":function(e,t,a){var o=a("xwOm");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a("XkoO")("5b00294c",o,!0)},I4CF:function(e,t,a){var o=a("0nnt"),s=o.JSON||(o.JSON={stringify:JSON.stringify});e.exports=function(e){return s.stringify.apply(s,arguments)}},QsNO:function(e,t,a){"use strict";var o=a("3cXf"),s=a.n(o),n=a("a3Yh"),l=a.n(n),i=a("4YfN"),r=a.n(i),c=a("lQSI");t.a={props:{},created:function(){this.change(this.$route.path)},ready:function(){},computed:r()({},a.i(c.b)(["Icons"])),data:function(){var e;return e={data:{btnText:"隐藏附注",isShow:!0,metadata:{},spec:{to:{},port:{}}},value:"操作",btnText:"隐藏附注",isShow:!0,value1:"",detail:{},routes:[],annotations:[],events:[],setTime:"创建于1天前",activeName:"first",tableData:[{date:"无",name:"8080/tcp",address:"8443"},{date:"无",name:"8080/tcp",address:"8443"}],options:[{value:"选项1",label:"时间"},{value:"选项2",label:"大小"},{value:"选项3",label:"内存"}]},l()(e,"value","时间"),l()(e,"selvalue",""),e},beforeMount:function(){var e=this;this.$ajax.get(this.$httpConfig.service_detail.replace("{projectName}",e.$route.params.disName).replace("{serviceName}",e.$route.query.service)).then(function(t){console.log(t.data);var a=t.data;a.timeago=e.timeago.format(a.metadata.creationTimestamp,"zh_CN"),a.spec_selector=s()(a.spec.selector).replace(/[\"\{\}]/g,"").replace(/:/g,"="),e.$set(e,"detail",a);for(var o in a.metadata.annotations)e.annotations.push({key:o,value:a.metadata.annotations[o]})}).catch(function(e){console.log(e)}),this.$ajax.get(this.$httpConfig.routes.replace("{projectName}",e.$route.params.disName)).then(function(t){console.log(t.data);for(var a=0;a<t.data.items.length;a++){var o=t.data.items[a];o.spec.to.name==e.$route.query.service&&e.routes.push({name:o.spec.to.name,port:o.spec.port?o.spec.port.targetPort:"",address:o.spec.to.name})}}).catch(function(e){console.log(e)})},components:{},filters:{},methods:r()({showToggle:function(){this.isShow=!this.isShow,this.isShow?this.btnText="隐藏附注":this.btnText="显示附注"}},a.i(c.c)(["change"]),{handleRouteClick:function(e,t,a){this.$router.push({name:"路由详情",query:{route:e.name}})},handleClick:function(e,t){var a=this;console.log(e,t),"事件"==t.target.outerText&&(a.$set(a,"events",[]),this.$ajax.get(this.$httpConfig.events.replace("{projectName}",a.$route.params.disName)).then(function(e){console.log(e.data);for(var t=0;t<e.data.items.length;t++){var o=e.data.items[t];"Service"==o.involvedObject.kind&&a.events.push({date:a.timeago.format(o.lastTimestamp,"zh_CN"),reason:o.reason,message:o.message})}var s=e.data.metadata.resourceVersion,n=a.$httpConfig.socketHost+e.data.metadata.selfLink+"?access_token="+a.$token+"&watch=true&resourceVersion="+s,l=new WebSocket(n);l.onmessage=function(e){console.log("[onmessage]"),console.log(e)},l.onerror=function(e){console.log("[onerror]"),console.log(e)},l.onopen=function(e){console.log("[onopen]"),console.log(e)},l.onclose=function(){}}).catch(function(e){console.log(e)}))},handleCommand:function(e){var t=this;"b"==e?this.$router.push({name:"编辑YAML",query:{estate:1,service:this.$route.query.service}}):"a"==e?this.$router.push({name:"创建路由",query:{service:this.$route.query.service}}):"c"==e&&this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=t;e.$ajax.delete(e.$httpConfig.service_detail.replace("{projectName}",e.$route.params.disName).replace("{serviceName}",e.$route.query.service)).then(function(t){e.$message({type:"success",message:"删除成功!"}),e.$router.go(-1)}).catch(function(t){console.log(t),e.$message({type:"error",message:"删除失败!"})})}).catch(function(){that.$message({type:"info",message:"已取消删除"})})}}),watch:{}}},"UQ/X":function(e,t,a){"use strict";function o(e){a("94Ue")}Object.defineProperty(t,"__esModule",{value:!0});var s=a("QsNO"),n=a("jmMV"),l=a("J0+h"),i=o,r=l(s.a,n.a,i,"data-v-42d4e7bf",null);t.default=r.exports},a3Yh:function(e,t,a){"use strict";t.__esModule=!0;var o=a("liLe"),s=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=function(e,t,a){return t in e?(0,s.default)(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},jmMV:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("el-row",{staticClass:"servicedetail-head"},[a("el-col",{attrs:{span:5}},[a("div",{staticClass:"servicede-left"},[a("div",[a("p",{attrs:{id:"header_p"}},[e._v(e._s(e.$route.query.service))])]),e._v(" "),a("p",{attrs:{id:"header_p1"}},[e._v("创建于"+e._s(e.detail.timeago))])])]),e._v(" "),a("el-col",{attrs:{span:3,offset:16}},[a("div",{staticClass:"btn110 slecte"},[a("div",{staticClass:"ml10 selectwh110"},[a("el-select",{attrs:{placeholder:"操作"},on:{change:e.handleCommand},model:{value:e.selvalue,callback:function(t){e.selvalue=t},expression:"selvalue"}},[a("el-option",{attrs:{label:"创建路由",value:"a"}}),e._v(" "),a("el-option",{attrs:{label:"编辑YAML",value:"b"}}),e._v(" "),a("el-option",{attrs:{label:"删除",value:"c"}})],1)],1)])])],1),e._v(" "),a("div",{staticClass:"serviecede-content"},[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"详情",name:"first"}},[a("div",{staticClass:"content-one"},[a("p",[e._v("选择器："+e._s(e.detail.spec_selector))]),e._v(" "),a("p",[e._v("类型："+e._s(e.detail.spec.type))])]),e._v(" "),a("div",{staticClass:"content-two"},[a("p",[e._v(" IP:"+e._s(e.detail.spec.clusterIP)+" ")]),e._v(" "),a("p",[e._v("会话归属："+e._s(e.detail.spec.sessionAffinity))])]),e._v(" "),a("div",{staticClass:"content-three"},[a("P",[e._v("路由:\n              "),a("router-link",{staticClass:"blue-color",staticStyle:{"text-decoration":"underline"},attrs:{to:{name:"创建路由",query:{service:e.$route.query.service}}}},[e._v(" 创建路由")])],1)],1),e._v(" "),a("el-table",{staticClass:"my-tabel mt20",attrs:{data:e.routes,stripe:""},on:{"current-change":e.handleRouteClick}},[a("el-table-column",{attrs:{align:"center",prop:"name",label:"节点端口"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"",label:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("icon-svg",{staticClass:"blue-color f22",attrs:{"icon-class":e.Icons.arrowIcon}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"port",label:"服务端口"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"",label:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("icon-svg",{staticClass:"blue-color f22",attrs:{"icon-class":e.Icons.arrowIcon}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"address",label:"目标端口"}})],1),e._v(" "),a("div",{staticClass:"button_div"},[a("el-button",{staticClass:"wh100",domProps:{textContent:e._s(e.btnText)},on:{click:e.showToggle}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],staticClass:"footer mt30"},[a("div",{staticClass:"mt15"},[a("span",{staticClass:" ml20"},[e._v("openshift.io/generated-by")]),e._v(" "),a("span",{staticClass:" mar-big"},[e._v("OpenShiftWebConsole")])])])],1),e._v(" "),a("el-tab-pane",{attrs:{label:"事件",name:"second"}},[a("el-row",[a("el-col",{staticClass:"input-btn mg10",attrs:{span:12}},[a("el-input",{attrs:{placeholder:"按名称搜索"}}),e._v(" "),a("el-button",{staticClass:"shade-button ml10"},[e._v("过滤")])],1),e._v(" "),a("el-col",{staticClass:"inner-element mg10 tr",attrs:{span:12}},[a("div",[e._v("排序：")]),e._v(" "),a("div",{staticClass:"ml10"},[a("el-select",{attrs:{placeholder:"最近1小时"},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)])],1),e._v(" "),a("el-table",{staticStyle:{width:"95%","margin-top":"30px"},attrs:{data:e.events}},[a("el-table-column",{attrs:{align:"center",prop:"date",label:"时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"reason",label:"原因"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"message",label:"消息"}})],1)],1)],1)],1)],1)])},s=[],n={render:o,staticRenderFns:s};t.a=n},liLe:function(e,t,a){e.exports={default:a("uwuJ"),__esModule:!0}},uwuJ:function(e,t,a){a("6NfO");var o=a("0nnt").Object;e.exports=function(e,t,a){return o.defineProperty(e,t,a)}},xwOm:function(e,t,a){t=e.exports=a("YfG4")(!1),t.push([e.i,"P[data-v-42d4e7bf]{margin:0}.footer[data-v-42d4e7bf]{width:910px;height:50px;background-color:#f9f9f9;border-bottom:1px solid #e5e5e5;border-top:1px solid #e5e5e5}.mt15[data-v-42d4e7bf]{margin-top:15px}.mar-big[data-v-42d4e7bf]{margin-left:100px}#header_p[data-v-42d4e7bf]{font-size:20px}.mg10[data-v-42d4e7bf]{margin-top:10px}#header_p1[data-v-42d4e7bf]{font-size:12px;color:#636363}.servicedetail-head[data-v-42d4e7bf]{height:110px;background-color:#f9f9f9}.line40[data-v-42d4e7bf]{line-height:40px}.servicede-left[data-v-42d4e7bf]{margin-left:30px;margin-top:30px}.slecte[data-v-42d4e7bf]{margin-top:38px}.servicede-left>p[data-v-42d4e7bf]{margin-top:10px;font-size:14px}ul>li[data-v-42d4e7bf]{font-size:14px}.serviecede-content[data-v-42d4e7bf]{margin-top:20px}.content-one[data-v-42d4e7bf]{margin-top:10px}.content-one>p[data-v-42d4e7bf]{display:inline-block}.content-one>p[data-v-42d4e7bf]:last-child{margin-left:100px}.content-two[data-v-42d4e7bf]{margin-top:15px}.content-two>p[data-v-42d4e7bf]{display:inline-block}.content-two>p[data-v-42d4e7bf]:last-child{margin-left:100px}.content-three[data-v-42d4e7bf]{margin-top:15px}.button_div[data-v-42d4e7bf]{height:80px;line-height:80px;width:60%}.show_div[data-v-42d4e7bf]{height:40px;width:80%;background-color:#fbfbfb;border-top:1px solid #e5e5e5;border-bottom:1px solid #e5e5e5}.my-tabel[data-v-42d4e7bf]{width:80%}",""])}});