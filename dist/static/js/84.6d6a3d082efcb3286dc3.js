webpackJsonp([84],{A7Qg:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"content-title"},[e._v(" 自动扩展部署配置 "+e._s(e.form.name))]),e._v(" "),a("div",{staticClass:"content-container"},[a("el-row",[a("el-col",{staticClass:"tips width160"},[e._v(" 根据CPU使用率自动扩展副本")]),e._v(" "),a("el-col",{staticClass:"bluewords ml20 mt2",attrs:{span:2}},[e._v(" 点击了解更多")])],1),e._v(" "),a("div",{staticClass:"mt20 auto"},[a("el-row",[a("el-col",{staticClass:"mt10 left width130"},[e._v("自动扩展配置名：")]),e._v(" "),a("el-col",{attrs:{span:20}},[a("el-input",{staticClass:"search-input",attrs:{placeholder:""},model:{value:e.form.name,callback:function(t){e.form.name=t},expression:"form.name"}}),e._v(" "),a("p",{staticClass:"tips"},[e._v(" 改项目下水平自动扩展唯一的命名")])],1)],1),e._v(" "),a("el-row",[a("el-col",{staticClass:"mt10 left width130"},[e._v("最少的容器组数量：")]),e._v(" "),a("el-col",{attrs:{span:20}},[a("el-input",{staticClass:"search-input",model:{value:e.form.minReplicas,callback:function(t){e.form.minReplicas=t},expression:"form.minReplicas"}}),e._v(" "),a("p",{staticClass:"tips"},[e._v(" 自动扩展中设置的最小容器组数量，如果没有指定，默认是1")])],1)],1),e._v(" "),a("el-row",[a("el-col",{staticClass:"mt10 left width130"},[e._v("最大的容器组数量：")]),e._v(" "),a("el-col",{attrs:{span:20}},[a("el-input",{staticClass:"search-input",model:{value:e.form.maxReplicas,callback:function(t){e.form.maxReplicas=t},expression:"form.maxReplicas"}}),e._v(" "),a("p",{staticClass:"tips"},[e._v(" 自动扩展中设置的最大容器组数量")])],1)],1),e._v(" "),a("el-row",[a("el-col",{staticClass:"mt10 left width130"},[e._v("CPU请求率目标值：")]),e._v(" "),a("el-col",{attrs:{span:20}},[a("el-input",{staticClass:"search-input",attrs:{value:"25%"},model:{value:e.form.targetCPUUtilizationPercentage,callback:function(t){e.form.targetCPUUtilizationPercentage=t},expression:"form.targetCPUUtilizationPercentage"}}),e._v(" "),a("p",{staticClass:"tips"},[e._v(" 每个容器组应该理想的使用CPU，容器组数量会根据CPU使用率超过或低于目标值而周期性的增加或减少，默认CPU使用率目标设置为80%")]),e._v(" "),a("div",{staticClass:"bluewords  mt20"},[e._v("\n            点击了解更多\n          ")])],1)],1)],1),e._v(" "),a("div",{staticClass:"mt20"}),e._v(" "),a("div",{staticClass:"btn110 mt30 ml56"},[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v(" 保存 ")]),e._v(" "),a("el-button",{staticClass:"shade-button"},[e._v(" 取消 ")])],1)],1)])},i=[],o={render:s,staticRenderFns:i};t.a=o},TJ13:function(e,t,a){"use strict";var s=a("4YfN"),i=a.n(s),o=a("lQSI");t.a={props:{},created:function(){this.change(this.$route.path)},ready:function(){},data:function(){return{form:{isnew:!0,name:"",confirm:"base",date1:"",date2:"",delivery:!1,type:[],labels:[],resource:"",userName:"",password:"",descCAfile:"",descGitfile:"",minReplicas:1,maxReplicas:1,targetCPUUtilizationPercentage:"80%"},initdata:{},postdata:{}}},components:{},filters:{},methods:i()({},a.i(o.c)(["change"]),{onSubmit:function(){var e=this;console.log(e.$route);for(var t={},a=0;a<e.form.labels.length;a++)t[e.form.labels[a].key]=e.form.labels[a].value;var s=e.postdata;s.metadata.labels=t,s.spec.minReplicas=e.form.minReplicas,s.spec.maxReplicas=e.form.maxReplicas,s.spec.targetCPUUtilizationPercentage=e.form.targetCPUUtilizationPercentage,e.form.isnew?(s.metadata.creationTimestamp=(new Date).toISOString(),this.$ajax.post(e.$httpConfig.horizontalpodautoscalers.replace("{projectName}",e.$route.params.disName),s).then(function(t){console.log("submited!"),console.log(t),e.$router.go(-1)}).catch(function(e){console.log("submit error!"),console.log(e)})):this.$ajax.put(e.$httpConfig.horizontalpodautoscalers_edit.replace("{projectName}",e.$route.params.disName).replace("{autoName}",e.$route.query.deploy),s).then(function(t){console.log("submited!"),console.log(t),e.$router.go(-1)}).catch(function(e){console.log("submit error!"),console.log(e)})},addrow:function(e){if(this.form.labels.length-1==e){this.form.labels.push({key:"",value:""})}},delrow:function(e){this.form.labels.length>1&&this.form.labels.splice(e,1)}}),beforeMount:function(){var e=this;this.$ajax.get(e.$httpConfig.horizontalpodautoscalers_edit.replace("{projectName}",e.$route.params.disName).replace("{autoName}",e.$route.query.deploy)).then(function(t){console.log(t.data);var a=t.data;if(a.metadata.labels){var s=[];for(var i in a.metadata.labels)s.push({key:i,value:a.metadata.labels[i]});e.$set(e,"form",{isnew:!1,name:e.$route.query.deploy,confirm:"base",date1:"",date2:"",delivery:!1,type:[],labels:s,resource:"",userName:"",password:"",descCAfile:"",descGitfile:"",minReplicas:a.spec.minReplicas,maxReplicas:a.spec.maxReplicas,targetCPUUtilizationPercentage:a.spec.targetCPUUtilizationPercentage}),e.$set(e,"initdata",a),e.$set(e,"postdata",a)}else e.$ajax.get(e.$httpConfig.limitranges.replace("{projectName}",e.$route.params.disName)).then(function(t){console.log(t.data);var a=t.data;e.$set(e,"form",{isnew:!0,name:e.$route.query.deploy,confirm:"base",date1:"",date2:"",delivery:!1,type:[],labels:[{key:"app",value:e.$route.query.deploy}],resource:"",userName:"",password:"",descCAfile:"",descGitfile:"",minReplicas:1,maxReplicas:1,targetCPUUtilizationPercentage:"80%"}),e.$set(e,"initdata",a),e.$set(e,"postdata",{kind:"HorizontalPodAutoscaler",apiVersion:"autoscaling/v1",metadata:{name:"caishuphp",namespace:"caishuproj",selfLink:"/apis/autoscaling/v1/namespaces/"+e.$route.params.disName+"/horizontalpodautoscalers/"+e.$route.query.deploy,uid:"c28af003-a750-11e7-855d-06d5ca59684e",resourceVersion:"170606543",creationTimestamp:"",labels:[{key:"app",value:e.$route.query.deploy}]},spec:{scaleTargetRef:{kind:"DeploymentConfig",name:"caishuphp",apiVersion:"extensions/v1beta1"},minReplicas:1,maxReplicas:1,targetCPUUtilizationPercentage:1440},status:{currentReplicas:0,desiredReplicas:0}})}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})},computed:{},watch:{}}},WIEc:function(e,t,a){"use strict";function s(e){a("lS8A")}Object.defineProperty(t,"__esModule",{value:!0});var i=a("TJ13"),o=a("A7Qg"),l=a("J0+h"),c=s,r=l(i.a,o.a,c,"data-v-ef9ca08c",null);t.default=r.exports},kvPc:function(e,t,a){t=e.exports=a("YfG4")(!1),t.push([e.i,".auto[data-v-ef9ca08c]{width:100%}.left[data-v-ef9ca08c]{width:160px;text-align:right;margin-right:10px}.ml50[data-v-ef9ca08c]{margin-left:50px}.width114[data-v-ef9ca08c]{width:114px}.width160[data-v-ef9ca08c]{width:160px}.width130[data-v-ef9ca08c]{width:130px}",""])},lS8A:function(e,t,a){var s=a("kvPc");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a("XkoO")("25b009d5",s,!0)}});