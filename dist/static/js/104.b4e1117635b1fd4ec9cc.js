webpackJsonp([104],{"7Y/D":function(t,e,i){var s=i("N8OS");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);i("XkoO")("4f7dab8d",s,!0)},N8OS:function(t,e,i){e=t.exports=i("YfG4")(!1),e.push([t.i,".el-top-botom-30[data-v-015ad791]{margin:30px}.el-left[data-v-015ad791]{margin-left:20px}.el-font[data-v-015ad791]{font-size:20px;color:#333}.limit-top-10[data-v-015ad791]{margin-top:10px;margin-left:50px}.limit-middle[data-v-015ad791]{width:50px;text-align:left;font-size:14px;color:#333}.el-input[data-v-015ad791]{width:350px}p[class=tips][data-v-015ad791]{margin-left:50px}.limit-button[data-v-015ad791]{background:#ff9832;color:#fff;width:120px}.limit-button-cancle[data-v-015ad791]{width:120px}.el-select[data-v-015ad791]{width:150px;margin-left:20px}",""])},ORXo:function(t,e,i){"use strict";var s=i("4YfN"),l=i.n(s),u=i("lQSI");e.a={props:{},created:function(){this.change(this.$route.path)},ready:function(){},data:function(){return{postdata:{},limitranges:{},options:[{value:"milicores",label:"milicores"}],options1:[{value:"Mib",label:"Mib"},{value:"Gi",label:"Gi"}],cpu_request_unit:"milicores",cpu_limit_unit:"milicores",memory_request_unit:"Mib",memory_limit_unit:"Mib",cpu_request_inputValue:"",cpu_limit_inputValue:"",memory_request_inputValue:"",memory_limit_inputValue:""}},beforeMount:function(){var t=this;this.$ajax.get(t.$httpConfig.deploy_detail.replace("{projectName}",t.$route.params.disName).replace("{deployName}",t.$route.query.deploy)).then(function(e){console.log(e.data);var i=e.data;t.$set(t,"postdata",i),i.spec.template.spec.containers[0].resources.limits&&(t.$set(t,"cpu_limit_inputValue",i.spec.template.spec.containers[0].resources.limits.cpu),t.$set(t,"memory_limit_inputValue",i.spec.template.spec.containers[0].resources.limits.memory)),i.spec.template.spec.containers[0].resources.requests&&(t.$set(t,"cpu_request_inputValue",i.spec.template.spec.containers[0].resources.requests.cpu),t.$set(t,"memory_request_inputValue",i.spec.template.spec.containers[0].resources.requests.memory)),t.initMib()}).catch(function(t){console.log(t)}),this.$ajax.get(t.$httpConfig.limitranges.replace("{projectName}",t.$route.params.disName)).then(function(e){console.log(e.data);var i=e.data;t.$set(t,"limitranges",i.items[0].spec.limits)}).catch(function(t){console.log(t)})},components:{},filters:{},methods:l()({},i.i(u.c)(["change"]),{onSubmit:function(){var t=this;console.log(t.$route);var e=t.postdata;e.spec.template.spec.containers[0].resources.limits={memory:t.getMib(t.memory_limit_inputValue,t.memory_limit_unit),cpu:t.cpu_limit_inputValue},this.$ajax.put(t.$httpConfig.deploy_detail.replace("{projectName}",t.$route.params.disName).replace("{deployName}",t.$route.query.deploy),e).then(function(e){t.$message({type:"success",message:"保存成功!"}),t.$router.go(-1)}).catch(function(e){t.$message({type:"error",message:"保存失败!"}),console.log(e)})},onCancel:function(){this.$router.go(-1)},getMib:function(t,e){return null==t||""==t?"":"Mib"==e?t+"Mib":t+"Gi"},initMib:function(){this.cpu_request_inputValue,this.cpu_limit_inputValue,this.memory_request_inputValue&&(this.memory_request_inputValue.indexOf("Gi")?(this.$set(this,"memory_request_inputValue",this.memory_request_inputValue.replace("Gi","")),this.$set(this,"memory_request_unit","Gi")):(this.$set(this,"memory_request_inputValue",this.memory_request_inputValue.replace("Mib","")),this.$set(this,"memory_request_unit","Mib"))),this.memory_limit_inputValue&&(this.memory_limit_inputValue.indexOf("Gi")?(this.$set(this,"memory_limit_inputValue",this.memory_limit_inputValue.replace("Gi","")),this.$set(this,"memory_limit_unit","Gi")):(this.$set(this,"memory_limit_inputValue",this.memory_limit_inputValue.replace("Mib","")),this.$set(this,"memory_limit_unit","Mib")))},setMib:function(){this.cpu_request_inputValue,this.cpu_limit_inputValue,this.memory_request_inputValue&&("Mib"==this.memory_request_unit&&this.memory_request_inputValue%1024==0?(this.$set(this,"memory_request_inputValue",Math.floor(this.memory_request_inputValue/1024)),this.$set(this,"memory_request_unit","Gi")):"Gi"==this.memory_request_unit&&this.memory_request_inputValue<1&&(this.$set(this,"memory_request_inputValue",Math.floor(1024*this.memory_request_inputValue)),this.$set(this,"memory_request_unit","Mib"))),this.memory_limit_inputValue&&("Mib"==this.memory_limit_unit&&this.memory_limit_inputValue%1024==0?(this.$set(this,"memory_limit_inputValue",Math.floor(this.memory_limit_inputValue/1024)),this.$set(this,"memory_limit_unit","Gi")):"Gi"==this.memory_limit_unit&&this.memory_limit_inputValue<1&&(this.$set(this,"memory_limit_inputValue",Math.floor(1024*this.memory_limit_inputValue)),this.$set(this,"memory_limit_unit","Mib")))}}),computed:{},watch:{}}},aOnL:function(t,e,i){"use strict";function s(t){i("7Y/D")}Object.defineProperty(e,"__esModule",{value:!0});var l=i("ORXo"),u=i("fWq5"),a=i("J0+h"),n=s,o=a(l.a,u.a,n,"data-v-015ad791",null);e.default=o.exports},fWq5:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"content-title"},[t._v(" 资源限制："+t._s(t.$route.query.deploy))]),t._v(" "),i("div",{staticClass:"content-container"},[t._m(0),t._v(" "),i("div",{staticClass:"el-font mt20"},[t._v("CPU")]),t._v(" "),i("el-row",{staticClass:"mt10"},[i("el-col",{staticClass:"limit-middle mt8"},[t._v(" 请求：")]),t._v(" "),i("el-input",{attrs:{placeholder:""},on:{blur:function(e){t.setMib()}},model:{value:t.cpu_request_inputValue,callback:function(e){t.cpu_request_inputValue=e},expression:"cpu_request_inputValue"}}),t._v(" "),i("el-select",{model:{value:t.cpu_request_unit,callback:function(e){t.cpu_request_unit=e},expression:"cpu_request_unit"}},t._l(t.options,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),i("p",{staticClass:"tips"},[t._v("容器请求的CPU数量")]),t._v(" "),i("el-row",{staticClass:"mt10"},[i("el-col",{staticClass:"limit-middle mt8"},[t._v(" 限制：")]),t._v(" "),i("el-input",{attrs:{placeholder:""},on:{blur:function(e){t.setMib()}},model:{value:t.cpu_limit_inputValue,callback:function(e){t.cpu_limit_inputValue=e},expression:"cpu_limit_inputValue"}}),t._v(" "),i("el-select",{model:{value:t.cpu_limit_unit,callback:function(e){t.cpu_limit_unit=e},expression:"cpu_limit_unit"}},t._l(t.options,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),i("p",{staticClass:"tips"},[t._v("容器限制请求的CPU数量")]),t._v(" "),i("p",{staticClass:"el-font "},[t._v("内存")]),t._v(" "),i("el-row",{staticClass:"mt10"},[i("el-col",{staticClass:"limit-middle mt8"},[t._v(" 请求：")]),t._v(" "),i("el-input",{attrs:{placeholder:""},on:{blur:function(e){t.setMib()}},model:{value:t.memory_request_inputValue,callback:function(e){t.memory_request_inputValue=e},expression:"memory_request_inputValue"}}),t._v(" "),i("el-select",{model:{value:t.memory_request_unit,callback:function(e){t.memory_request_unit=e},expression:"memory_request_unit"}},t._l(t.options1,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),i("p",{staticClass:"tips"},[t._v("容器请求的内存数量")]),t._v(" "),i("el-row",{staticClass:"mt10"},[i("el-col",{staticClass:"limit-middle mt8"},[t._v(" 限制：")]),t._v(" "),i("el-input",{attrs:{placeholder:""},on:{blur:function(e){t.setMib()}},model:{value:t.memory_limit_inputValue,callback:function(e){t.memory_limit_inputValue=e},expression:"memory_limit_inputValue"}}),t._v(" "),i("el-select",{staticClass:"width150",model:{value:t.memory_limit_unit,callback:function(e){t.memory_limit_unit=e},expression:"memory_limit_unit"}},t._l(t.options1,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),i("p",{staticClass:"tips"},[t._v("容器限制请求的内存数量")]),t._v(" "),i("el-button",{staticClass:"limit-top-10 limit-button",on:{click:t.onSubmit}},[t._v("保存")]),t._v(" "),i("el-button",{staticClass:"limit-top-10 limit-button-cancle shade-button",on:{click:t.onCancel}},[t._v("取消")])],1)])},l=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("span",{staticClass:"tips"},[t._v("\n\t      \t资源限制控制一个容器在一个节点上消耗的cpu和内存大小。\n\t    \t")]),t._v(" "),i("span",{staticClass:"bluewords ml20"},[t._v("\n\t       \t 点击了解更多\n\t      ")])])}],u={render:s,staticRenderFns:l};e.a=u}});